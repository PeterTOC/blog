{
  "hash": "2939ce21a6aa4fa22fbe9bca3f2267e7",
  "result": {
    "markdown": "---\ntitle: \"Tanzania Mainland Football Championships; 1965 - 2020\"\nauthor: \"Peter Boshe\"\ndate: \"2021-11-29\"\ncode-copy: true\ncategories: \n  - DataViz\n  - Unguided Project\n  - R-programming\nimage: \"../../assets/mainland_championship.gif\"\ndescription: \"This is a racing bar chart of the male football championships and the respective teams that have won over the past half century\"\nsubject: \"portfolio\"\n---\n\n\nThis is a racing bar chart of the championships and the respective teams that have won over the past half century(acc. to [Data](http://www.rsssf.com/tablest/tanzchamp.html)),\n\nWould you have guessed that less than 10 teams (only 9 teams) have won since the conception of the cup?\n\n\n::: {.cell hash='index_cache/html/image-code_110308aa9ffe4c71ee98fccd60c0f417'}\n\n```{.r .cell-code  code-fold=\"true\"}\n## setting up the environment\n# clear environment \nrm(list = ls())\n\n# setting environment \nlibrary(readxl)\nlibrary(tidyverse)\nlibrary(gganimate)\nlibrary(lubridate)\nlibrary(gifski)\nlibrary(png)\nlibrary(knitr)\n\n# loading data \ndf <- read_excel(\"Tanzania mainland championships.xlsx\")\n\n## pre-processing\ndf2 <- df %>% \n  mutate(Cup = 1) %>% \n  complete(Team, Year) %>% \n  replace_na(list(Cup = 0)) %>%  \n  group_by(Team) %>% \n  mutate(count = cumsum(Cup))\n  \ndf2 %>% \n  group_by(Year) %>% \n  arrange(Year, -count) %>% \n  #assign ranking\n  mutate(rank = 1:n()) ->\nranked_by_year\n\nmy_theme <- theme_classic(base_size = 22, \n                          base_family = \"Times\") +\n  theme(axis.text.y = element_blank()) +\n  theme(axis.ticks.y = element_blank()) +\n  theme(axis.line.y = element_blank()) +\n  theme(legend.position = \"none\")\n  # theme(legend.background = element_rect(fill = \"gainsboro\")) +\n  # theme(plot.background = element_rect(fill = \"gainsboro\")) +\n  # theme(panel.background = element_rect(fill = \"gainsboro\"))\n\n### Static Plot\nvalues <- c(\"Azam FC\" = \"blue\", \"Young Africans SC\" = \"yellow\", \"Simba SC\" = \"red\", \"Hybrid SC\" = \"brown\", \"Cosmopolitan\" = \"lightblue\", \"Coastal Union\" = \"black\", \"Tukuyu Stars\" = \"orange\", \"Mtibwa Sugar\" = \"darkgreen\")\n\n\nranked_by_year %>% \n   ggplot(\n  aes(xmin = 0,\n      xmax = count,\n      ymin = rank - .45,\n      ymax = rank + .45,\n      y = rank,\n    fill = Team\n  )\n) +\n  geom_rect(alpha = .7) +  \n  geom_text(col = \"gray13\",  \n            hjust = \"right\",  \n            aes(label = Team),  \n            x = -1) + \n    geom_text(aes(count + 1,\n                  label = round(count)),\n            color = \"black\",\n            position = \"identity\",\n            size = 3.5) +\n  scale_y_reverse() +\n  scale_fill_manual(\"legend\", values = values) +\n  # scale_x_continuous(\n  #   limits = c(-39, 27),\n  #   breaks = 1:30) +\n  labs(\n    title = \"Mainland Championships\",\n    x = \"Cups Won\",\n    y = \"\"\n  ) + \n    facet_wrap(~ Year) +\n  my_theme ->\nmy_plot\n\n\n## Make Gif\nmy_plot +  \n  facet_null() +  \n  scale_x_continuous(\n    limits = c(-10, 40),\n    breaks = seq(0, 30, 5)) +\n  geom_text(x = 30, y = -7.5,  \n            family = \"Times\",  \n            aes(label = as.character(Year)),  \n            size = 20, col = \"grey18\") +  \n  aes(group = Team) +  \n  transition_time(Year) -> p\n\n\n\nanimate(p, fps = 2, duration = 28, width = 800, height = 600) -> anim\n#save the gif \nanim_save(\"../../assets/mainland_championship.gif\", anim)\n# display the gif\nanim\n```\n\n::: {.cell-output-display}\n![racing plot of the mainland champions in Tanzania](index_files/figure-html/image-code-1.gif)\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}